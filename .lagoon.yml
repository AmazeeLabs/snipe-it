#
# This file is autogenerated by Laragoon
#

docker-compose-yaml: docker-compose.yml

project: snipeit
endpoint: api-lagoon-master.lagoon.ch.amazee.io:31472
api: api-lagoon-master.lagoon.ch.amazee.io:80

tasks:
  pre-rollout:
    - run:
        name: Create directories
        command: mkdir - p /app/storage/framework/ & mkdir - p /app/storage/framework/cache/ & mkdir - p /app/storage/framework/sessions/ & mkdir - p /app/storage/framework/views/
        service: cli
  post-rollout:
#    - run:
#        name: Create directories
#        command: mkdir - p /app/storage/framework/ & mkdir - p /app/storage/framework/cache/ & mkdir - p /app/storage/framework/sessions/ & mkdir - p /app/storage/framework/views/
#        service: cli
    - run:
        name: Run migrations
        command: php artisan migrate
        service: cli

environments:
 master:
   routes:
     - nginx:
       - "snipeit.amazeelabs.com"
   cronjobs:
     - name: artisan schedule
       schedule: "* * * * *"
       command: cd /app && php artisan schedule:run
       service: cli
